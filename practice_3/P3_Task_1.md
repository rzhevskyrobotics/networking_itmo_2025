# Задание 1

Выделен сетевой сегмент класса C – 192.168.2.0 /24. Используйте VSLM для назначения IP-адресов четырем подсетям. К маршрутизатору A подключены сети, состоящие из 15 и 7 хостов, а к маршрутизатору B подлючены сети из 10 и 5 хостов.

## Решение

Стандартное правило **VLSM** - сначала выделяем самые «большие» подсети, чтобы не фрагментировать адресное пространство.

**Требования**: **15, 10, 7, 5** хостов.

**Порядок (по убыванию)**: **15 → 10 → 7 → 5**.

### Определение масок (формула и расчёт)

Используем формулу: нужно найти минимальное число бит для хостов `h_bits`, такое что `2^(h_bits) - 2 >= required_hosts`. Это эквивалентно `h_bits = ceil(log2(required_hosts + 2))`. Префикс = `32 - h_bits`.

1. Расчёт для **15** хостов:
   
   - `required_hosts + 2 = 15 + 2 = 17`;
   
   - `log2(17) ≈ 4.087` → `h_bits = ceil(4.087) = 5`;
   
   - Префикс = `32 - 5 = /27`;
   
   - Всего адресов в подсети = `2^5 = 32`, usable = `32 - 2 = 30`;

2. Для **10** хостов:
   
   - `10 + 2 = 12`;
   
   - `log2(12) ≈ 3.585` → `h_bits = 4`;
   
   - Префикс = `32 - 4 = /28`;
   
   - Всего = `2^4 = 16`, usable = `14`;
- Для **7** хостов:
  
  - `7 + 2 = 9`;
  
  - `log2(9) ≈ 3.17` → `h_bits = 4`;
  
  - Префикс = `/28`;
  
  - Всего = `16`, usable = `14`;

- Для **5** хостов:
  
  - `5 + 2 = 7`;
  
  - `log2(7) ≈ 2.807` → `h_bits = 3`;
  
  - Префикс = `/29`;
  
  - Всего = `2^3 = 8`, usable = `6`;

Также полезно знать маски в десятичном виде и величину шага (block size) в последнем октете:

- `/27` → маска `255.255.255.224`. Шаг = `256 - 224 = 32` (блоки через 32 адреса: .0, .32, .64, ...);

- `/28` → `255.255.255.240`. Шаг = `16` (блоки .0, .16, .32, .48, ...);

- `/29` → `255.255.255.248`. Шаг = `8` (блоки .0, .8, .16, .24, ...);

### Выделение блоков

Возьмём следующее **правило:** следующий сетевой адрес = текущий сетевой адрес + block_size (в последнем октете).

Тогда **подсеть 1 — для 15 хостов (Router A)**:

- **Размер блока**: `/27` → шаг 32;

- **Сетевой адрес**: `192.168.2.0/27` (начинаем с .0);

- **Всего адресов**: 32;

- **Доступно адресов**: 30;

- **Доступный диапазон**: `192.168.2.1` - `192.168.2.30`;

- **Broadcast**: `192.168.2.31`;

- **Рекомендуемый шлюз**: `192.168.2.1` (или любой из usable);

Получается следующий свободный сетевой адрес = `192.168.2.0 + 32 = 192.168.2.32`.

Следующая **подсеть 2** - для 10 хостов (**Router B**)

- **Размер блока**: `/28` → шаг 16;

- **Сетевой адрес**: `192.168.2.32/28`;

- **Всего адресов**: 16;

- **Доступно адресов**: 14;

- **Доступный диапазон**: `192.168.2.33` — `192.168.2.46`;

- **Broadcast**: `192.168.2.47`;

- **Шлюз**: `192.168.2.33`;

Значит следующий сетевой адрес = `192.168.2.32 + 16 = 192.168.2.48`.

Далее **подсеть 3** - для 7 хостов (**Router A**):

- **Размер блока**: `/28` → шаг 16;

- **Сетевой адрес**: `192.168.2.48/28`;

- **Всего адресов**: 16;

- **Доступно адресов**: 14;

- **Доступный диапазон**: `192.168.2.49` — `192.168.2.62`;

- **Broadcast**: `192.168.2.63`;

- **Шлюз**: `192.168.2.49`;

Далее следующий сетевой адрес = `192.168.2.48 + 16 = 192.168.2.64`.

Последняя **подсеть 4** — для 5 хостов (**Router B**):

- **Размер блока**: `/29` → шаг 8;

- **Сетевой адрес**: `192.168.2.64/29`;

- **Всего адресов**: 8;

- **Доступно адресов**: 6;

- **Доступный диапазон**: `192.168.2.65` — `192.168.2.70`;

- **Broadcast**: `192.168.2.71`;

- **Шлюз**: `192.168.2.65`;

Получаем свободный адрес после всех выделенных подсетей = `192.168.2.64 + 8 = 192.168.2.72`.

### Сводная таблица - ИТОГ

| Назначение               | Сеть           | Префикс | Маска             | Всего адресов | Доступно адресов | Доступный диапазон            | Broadcast      | Рекомендуемый шлюз |
| ------------------------ | -------------- | ------- | ----------------- | ------------- | ---------------- | ----------------------------- | -------------- | ------------------ |
| Для 15 хостов (Router A) | `192.168.2.0`  | `/27`   | `255.255.255.224` | 32            | 30               | `192.168.2.1`-`192.168.2.30`  | `192.168.2.31` | `192.168.2.1`      |
| Для 10 хостов (Router B) | `192.168.2.32` | `/28`   | `255.255.255.240` | 16            | 14               | `192.168.2.33`-`192.168.2.46` | `192.168.2.47` | `192.168.2.33`     |
| Для 7 хостов (Router A)  | `192.168.2.48` | `/28`   | `255.255.255.240` | 16            | 14               | `192.168.2.49`-`192.168.2.62` | `192.168.2.63` | `192.168.2.49`     |
| Для 5 хостов (Router B)  | `192.168.2.64` | `/29`   | `255.255.255.248` | 8             | 6                | `192.168.2.65`-`192.168.2.70` | `192.168.2.71` | `192.168.2.65`     |

# 
