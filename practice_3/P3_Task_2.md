# Задание 2

Выделен сетевой сегмент класса C – 192.168.3.0 /24. Используйте VSLM для назначения IP-адресов трем подсетям. К маршрутизатору A подключены сети, состоящие из 20 и 10 хостов, а к маршрутизатору B подлючена сеть из 8 хостов.

## Решение

**Требования**: **20, 10, 8** хостов.

**Порядок (по убыванию)**: **20 → 10 → 8**.

### Определение масок (формула и расчёт)

**Формула**: нужно найти минимальное число бит для хостов `h_bits`, такое что `2^h_bits - 2 >= required_hosts`. Эквивалент: найти минимальное `h_bits`, при котором `2^h_bits ≥ required_hosts + 2`.

1. Для **20** хостов:
   
   - `required + 2 = 20 + 2 = 22`;
   
   - Проверяем степени двойки: `2^4 = 16 < 22`, `2^5 = 32 ≥ 22`;
   
   - Значит `h_bits = 5` → префикс `32 - 5 = /27`;
   
   - В подсети: `2^5 = 32` адреса, usable = `32 - 2 = 30`;

2. Для **10** хостов:
   
   - `10 + 2 = 12`;
   
   - `2^3 = 8 < 12`, `2^4 = 16 ≥ 12`;
   
   - `h_bits = 4` → префикс `32 - 4 = /28`;
   
   - Всего `16`, usable = `14`;

3. Для **8** хостов:
   
   - `8 + 2 = 10`;
   
   - `2^3 = 8 < 10`, `2^4 = 16 ≥ 10`;
   
   - `h_bits = 4` → префикс `/28`;
   
   - Всего `16`, usable = `14`;

Маски и шаги в последнем октете:

- `/27` → `255.255.255.224`, шаг = `32`;

- `/28` → `255.255.255.240`, шаг = `16`;

### Выделение блоков

Следуем **правилу**: выделяем в порядке 20 → 10 → 8, двигаясь по адресу вперёд.

 Тогда подсеть **A1** - для 20 хостов (**Router A**):

- **Префикс**: `/27`;

- **Сетевой адрес**: `192.168.3.0/27`;

- **Всего адресов**: 32, **доступно**: 30;

- **Доступный диапазон**: `192.168.3.1` - `192.168.3.30`;

- **Broadcast**: `192.168.3.31`;

- **Шлюз**: `192.168.3.1`;

Тогда следующий свободный сетевой адрес = `192.168.3.0 + 32 = 192.168.3.32`.

Далее **подсеть A2** - для 10 хостов (**Router A**):

- **Префикс**: `/28`;

- **Сетевой адрес**: `192.168.3.32/28`;

- **Всего адресов**: 16, **доступно**: 14;

- **Доступный диапазон**: `192.168.3.33` - `192.168.3.46`;

- **Broadcast**: `192.168.3.47`;

- **Шлюз**: `192.168.3.33`;

Теперь следующий свободный сетевой адрес = `192.168.3.32 + 16 = 192.168.3.48`.

Следующая **подсеть B1** — для 8 хостов (**Router B**):

- **Префикс**: `/28`;

- **Сетевой адрес**: `192.168.3.48/28`;

- **Всего адресов**: 16, **доступно**: 14;

- **Доступный диапазон**: `192.168.3.49` - `192.168.3.62`;

- **Broadcast**: `192.168.3.63`;

- **Шлюз**: `192.168.3.49`;

Оставшийся свободный адрес после всех подсетей = `192.168.3.48 + 16 = 192.168.3.64`.

### Сводная таблица - ИТОГ

| Назначение                   | Сеть           | Префикс | Маска             | Всего адресов | Usable | Usable диапазон                 | Broadcast      | Рекомендуемый шлюз |
| ---------------------------- | -------------- | ------- | ----------------- | ------------- | ------ | ------------------------------- | -------------- | ------------------ |
| Router A — сеть на 20 хостов | `192.168.3.0`  | `/27`   | `255.255.255.224` | 32            | 30     | `192.168.3.1` - `192.168.3.30`  | `192.168.3.31` | `192.168.3.1`      |
| Router A — сеть на 10 хостов | `192.168.3.32` | `/28`   | `255.255.255.240` | 16            | 14     | `192.168.3.33` - `192.168.3.46` | `192.168.3.47` | `192.168.3.33`     |
| Router B — сеть на 8 хостов  | `192.168.3.48` | `/28`   | `255.255.255.240` | 16            | 14     | `192.168.3.49`- `192.168.3.62`  | `192.168.3.63` | `192.168.3.49`     |
