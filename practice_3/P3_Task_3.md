# Задание 3

Выделен сетевой сегмент класса C – 192.168.4.0 /24. Используйте VSLM для назначения IP-адресов четырем подсетям. К маршрутизатору A подключены сети, состоящие из 30 и 15 хостов, а к маршрутизатору B подлючены сети из 10 и 5 хостов.

## Решение

**Требования**: **30, 15, 10, 5** хостов.

**Порядок (по убыванию)**: **30 → 15 → 10 → 5**.

## Определение масок (формула и расчёт)

**Формула**: найдем минимальное число бит для хостов `h_bits`, такое что `2^h_bits - 2 ≥ required_hosts`. Эквивалент: `2^h_bits ≥ required_hosts + 2`. Префикс = `32 - h_bits`.

1. Для **30** хостов:
   
   - `required + 2 = 30 + 2 = 32`;
   
   - `2^5 = 32` → `h_bits = 5` → префикс = `32 - 5 = /27`;
   
   - В подсети: `2^5 = 32` адреса, usable = `32 - 2 = 30`;

2. Для **15** хостов:
   
   - `15 + 2 = 17`. `2^4 = 16 < 17`, `2^5 = 32 ≥ 17` → `h_bits = 5` → префикс `/27`;
   
   - Всего = 32, usable = 30 (то есть /27 покрывает 15);

3. Для **10** хостов:
   
   - `10 + 2 = 12`. `2^3 = 8 < 12`, `2^4 = 16 ≥ 12` → `h_bits = 4` → префикс `/28`;
   
   - Всего = 16, usable = 14;

4. Для **5** хостов:
   
   - `5 + 2 = 7`. `2^2 = 4 < 7`, `2^3 = 8 ≥ 7` → `h_bits = 3` → префикс `/29`;
   
   - Всего = 8, usable = 6;

Маски и шаги в последнем октете:

- `/27` → `255.255.255.224` → шаг = `32`;

- `/28` → `255.255.255.240` → шаг = `16`;

- `/29` → `255.255.255.248` → шаг = `8`;

### Выделение блоков

Следуем **правилу:** следующий сетевой адрес = текущий сетевой адрес + block_size.

**Подсеть 1** - для **30** хостов (**Router A**):

- **Префикс**: `/27`;

- **Сетевой адрес**: **`192.168.4.0/27`**;

- **Всего:** 32 адреса; **доступно:** `192.168.4.1` - `192.168.4.30`;

- **Broadcast**: **`192.168.4.31`**;

- **Шлюз**: **`192.168.4.1`** (можно выбрать любой usable);

Следующий свободный сетевой адрес: `192.168.4.0 + 32 = 192.168.4.32`;

**Подсеть 2** - для 15 хостов (**Router A**)

- **Префикс**: `/27`;

- **Сетевой адрес**: **`192.168.4.32/27`**;

- **Всего**: 32 адреса; **доступно**: **`192.168.4.33` - `192.168.4.62`**;

- **Broadcast**: **`192.168.4.63`**;

- **Шлюз**: **`192.168.4.33`**;

Далее следующий свободный сетевой адрес: `192.168.4.32 + 32 = 192.168.4.64`.

**Подсеть 3** - для 10 хостов (**Router B**):

- **Префикс**: `/28`;

- **Сетевой адрес**: **`192.168.4.64/28`**;

- **Всего**: 16 адресов; **доступно**: **`192.168.4.65` - `192.168.4.78`**;

- **Broadcast**: **`192.168.4.79`**;

- **Шлюз**: **`192.168.4.65`**;

Следующий свободный сетевой адрес: `192.168.4.64 + 16 = 192.168.4.80`.

**Подсеть 4** — для 5 хостов (**Router B**):

- **Префикс**: `/29`;

- **Сетевой адрес**: **`192.168.4.80/29`**;

- **Всего**: 8 адресов; **доступно**: **`192.168.4.81` — `192.168.4.86`**;

- **Broadcast**: **`192.168.4.87`**;

- **Шлюз**: **`192.168.4.81`**;

И последний следующий свободный сетевой адрес после всех подсетей = `192.168.4.80 + 8 = 192.168.4.88`.

### Сводная таблица - ИТОГ

| Назначение                       | Сеть           | Префикс | Маска             | Всего адресов | Usable (кол-во) | Usable диапазон                 | Broadcast      | Рекоменд. шлюз |
| -------------------------------- | -------------- | ------- | ----------------- | ------------- | --------------- | ------------------------------- | -------------- | -------------- |
| Router A — сеть на **30** хостов | `192.168.4.0`  | `/27`   | `255.255.255.224` | 32            | **30**          | `192.168.4.1` - `192.168.4.30`  | `192.168.4.31` | `192.168.4.1`  |
| Router A — сеть на **15** хостов | `192.168.4.32` | `/27`   | `255.255.255.224` | 32            | **30**          | `192.168.4.33` - `192.168.4.62` | `192.168.4.63` | `192.168.4.33` |
| Router B — сеть на **10** хостов | `192.168.4.64` | `/28`   | `255.255.255.240` | 16            | **14**          | `192.168.4.65` - `192.168.4.78` | `192.168.4.79` | `192.168.4.65` |
| Router B — сеть на **5** хостов  | `192.168.4.80` | `/29`   | `255.255.255.248` | 8             | **6**           | `192.168.4.81` - `192.168.4.86` | `192.168.4.87` | `192.168.4.81` |
