# STP Protocol Simulation (Python)

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —É–ø—Ä–æ—â—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ **STP (Spanning Tree Protocol)** –Ω–∞ —è–∑—ã–∫–µ Python.

STP –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –∫–∞–Ω–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–Ω–µ (L2) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ç–µ–ª—å –≤ —Å–µ—Ç–∏ —Å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞–º–∏.

–í —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

- –≤—ã–±–æ—Ä **Root Bridge** (–∫–æ—Ä–Ω–µ–≤–æ–≥–æ –º–æ—Å—Ç–∞) –Ω–∞ –æ—Å–Ω–æ–≤–µ Bridge ID;

- –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ—Ä—Ç–∞–º (**Root Port**, **Designated Port**, **Blocked Port**);

- –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ—Ä—Ç–æ–≤ (**FORWARDING**, **BLOCKED**);

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
stp_project/
‚îÇ‚îÄ‚îÄ main.py          # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∑–∞–ø—É—Å–∫ –º–æ–¥–µ–ª–∏
‚îÇ‚îÄ‚îÄ bridge.py        # –∫–ª–∞—Å—Å—ã Bridge –∏ Port
‚îî‚îÄ‚îÄ stp.py           # –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã STP
```

## üöÄ –ó–∞–ø—É—Å–∫

–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
cd stp_project
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª:

```bash
python main.py
```

### üì¶ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- **`bridge.py`** 
  
  –°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å—ã, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ —Å–µ—Ç–µ–≤–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:
  
  - **`Bridge`** ‚Äî –º–æ–¥–µ–ª—å –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞ (–º–æ—Å—Ç–∞).
    
    - –ü–æ–ª—è:
      
      - `priority` ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –º–æ—Å—Ç–∞;
      
      - `mac` ‚Äî MAC-–∞–¥—Ä–µ—Å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è Bridge ID);
      
      - `bridge_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ—Å—Ç–∞;
      
      - `ports` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ—Ä—Ç–æ–≤;
    
    - –ú–µ—Ç–æ–¥—ã:
      
      - `add_port(port)` ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ—Ä—Ç –∫ –º–æ—Å—Ç—É;
  
  - **`Port`** ‚Äî –º–æ–¥–µ–ª—å –ø–æ—Ä—Ç–∞ –º–æ—Å—Ç–∞.
    
    - –ü–æ–ª—è:
      
      - `name` ‚Äî –∏–º—è –ø–æ—Ä—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, p1, p2);
      
      - `cost` ‚Äî —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—É—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1);
      
      - `role` ‚Äî —Ä–æ–ª—å –ø–æ—Ä—Ç–∞ –≤ STP (Root / Designated / Blocked);
      
      - `state` ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Ä—Ç–∞ (FORWARDING / BLOCKED / DOWN);
      
      - `link` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–π –ø–æ—Ä—Ç (–¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –º–æ–¥–µ–ª–∏).

**`stp.py`** 

–°–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ STP:

- **`STP`** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞.
  
  - –ü–æ–ª—è:
    
    - `bridges` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–æ—Å—Ç–æ–≤ –≤ —Å–µ—Ç–∏;
    
    - `root_bridge` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–π Root Bridge;
  
  - –ú–µ—Ç–æ–¥—ã:
    
    - `elect_root_bridge()` ‚Äî –≤—ã–±–æ—Ä –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –º–æ—Å—Ç–∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Bridge ID);
    
    - `assign_roles()` ‚Äî –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ—Ä—Ç–∞–º –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π;
    
    - `run()` ‚Äî –ø–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ (–≤—ã–±–æ—Ä Root Bridge + –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π);

**`main.py`** 

–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É.

- –°–æ–∑–¥–∞—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ—Å—Ç–æ–≤ –∏ –∏—Ö –ø–æ—Ä—Ç—ã;

- –ü–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –≤ –∫–ª–∞—Å—Å `STP`;

- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º;

- –ü–µ—á–∞—Ç–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã (Root Bridge –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Ä—Ç–æ–≤);

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```bash
serg@serg-pc:/stp_project$ python main.py
Root Bridge –≤—ã–±—Ä–∞–Ω: (24576, 'aa:bb:cc:00:00:01')

Bridge (24576, 'aa:bb:cc:00:00:01')
  <Port p1 role=Designated state=FORWARDING>
  <Port p2 role=Designated state=FORWARDING>

Bridge (32768, 'aa:bb:cc:00:00:02')
  <Port p1 role=Root state=FORWARDING>
  <Port p2 role=Blocked state=BLOCKED>

Bridge (32768, 'aa:bb:cc:00:00:03')
  <Port p1 role=Root state=FORWARDING>
  <Port p2 role=Blocked state=BLOCKED>
```
